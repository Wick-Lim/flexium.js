<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flexium - Automatic Reactivity Demo</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    .container {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    h1 {
      color: #667eea;
      margin-top: 0;
      font-size: 42px;
    }
    h2 {
      color: #333;
      border-bottom: 3px solid #667eea;
      padding-bottom: 10px;
      margin-top: 40px;
    }
    .demo-box {
      background: #f8f9fa;
      border: 2px solid #e9ecef;
      border-radius: 12px;
      padding: 30px;
      margin: 20px 0;
    }
    .counter-display {
      font-size: 72px;
      font-weight: bold;
      color: #667eea;
      text-align: center;
      margin: 20px 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    .button-group {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    button {
      background: #667eea;
      color: white;
      border: none;
      padding: 14px 28px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.2s;
      box-shadow: 0 4px 6px rgba(102, 126, 234, 0.3);
    }
    button:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(102, 126, 234, 0.4);
    }
    button:active {
      transform: translateY(0);
    }
    button.secondary {
      background: #6c757d;
      box-shadow: 0 4px 6px rgba(108, 117, 125, 0.3);
    }
    button.secondary:hover {
      background: #5a6268;
    }
    code {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 3px 8px;
      border-radius: 4px;
      font-family: 'Fira Code', 'Courier New', monospace;
      font-size: 14px;
    }
    pre {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 20px;
      border-radius: 8px;
      overflow-x: auto;
      margin: 15px 0;
    }
    pre code {
      background: none;
      padding: 0;
    }
    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }
    .comparison-box {
      background: white;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      padding: 20px;
    }
    .comparison-box h3 {
      margin-top: 0;
      color: #495057;
    }
    .comparison-box.auto {
      border-color: #28a745;
    }
    .comparison-box.auto h3 {
      color: #28a745;
    }
    .comparison-box.manual {
      border-color: #dc3545;
    }
    .comparison-box.manual h3 {
      color: #dc3545;
    }
    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 10px;
    }
    .badge.auto {
      background: #d4edda;
      color: #155724;
    }
    .badge.manual {
      background: #f8d7da;
      color: #721c24;
    }
    @media (max-width: 768px) {
      .comparison {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Flexium Automatic Reactivity</h1>
    <p style="font-size: 18px; color: #666;">
      Pass signals directly as children - they update the DOM automatically! No manual <code>effect()</code> calls needed.
    </p>

    <h2>Live Demo: Automatic Counter</h2>
    <div class="demo-box" id="demo-automatic">
      <!-- Auto-rendered by Flexium -->
    </div>

    <h2>How It Works</h2>

    <div class="comparison">
      <div class="comparison-box auto">
        <h3>‚úÖ Automatic (Recommended) <span class="badge auto">NEW!</span></h3>
        <pre><code>// Just pass the signal directly!
const count = signal(0);

h('div', {}, [
  'Count: ',
  count  // üëà Signal updates DOM automatically
]);

// That's it! No effect() needed.</code></pre>
      </div>

      <div class="comparison-box manual">
        <h3>‚ùå Manual (Old Way) <span class="badge manual">VERBOSE</span></h3>
        <pre><code>// Old way - lots of boilerplate
const count = signal(0);
const element = h('div', {}, ['Count: 0']);

// Manual effect to update DOM
effect(() => {
  const textNode = element.childNodes[1];
  textNode.textContent = count.value;
});

// Much more code!</code></pre>
      </div>
    </div>

    <h2>Interactive Demo</h2>
    <p>Click the buttons to see automatic reactivity in action. The DOM updates without any manual <code>effect()</code> calls!</p>

    <div class="demo-box" id="demo-main">
      <!-- Main demo rendered here -->
    </div>

    <h2>Multiple Signals</h2>
    <div class="demo-box" id="demo-math">
      <!-- Math demo rendered here -->
    </div>

    <h2>Computed Values</h2>
    <div class="demo-box" id="demo-computed">
      <!-- Computed demo rendered here -->
    </div>

    <h2>Key Benefits</h2>
    <ul style="font-size: 16px; line-height: 1.8;">
      <li><strong>Less Boilerplate:</strong> No manual <code>effect()</code> calls needed</li>
      <li><strong>Cleaner Code:</strong> More declarative and easier to read</li>
      <li><strong>Fine-grained Updates:</strong> Only the specific DOM nodes update, not the whole component</li>
      <li><strong>Better Performance:</strong> Automatic optimization and batching</li>
      <li><strong>Type-safe:</strong> Full TypeScript support for signals</li>
    </ul>

    <h2>API Summary</h2>
    <pre><code>import { signal, computed, h, mountReactive } from 'flexium/dom';

// Create signals
const count = signal(0);
const doubled = computed(() => count.value * 2);

// Pass signals as children - automatic reactivity!
const vnode = h('div', {}, [
  'Count: ', count,
  ' | Doubled: ', doubled
]);

// Mount with reactive tracking
mountReactive(vnode, container);</code></pre>
  </div>

  <script type="module">
    import { signal, computed, h, mountReactive } from './dist/dom.mjs';

    // Demo 1: Simple automatic counter
    const autoCount = signal(0);
    const autoDemo = h('div', {}, [
      h('div', { style: { fontSize: '48px', fontWeight: 'bold', textAlign: 'center', color: '#667eea', margin: '20px 0' } }, [
        autoCount  // Automatic reactivity!
      ]),
      h('div', { className: 'button-group' }, [
        h('button', { onclick: () => autoCount.value-- }, ['- Decrement']),
        h('button', { onclick: () => autoCount.value = 0, className: 'secondary' }, ['Reset']),
        h('button', { onclick: () => autoCount.value++ }, ['+ Increment']),
      ])
    ]);
    mountReactive(autoDemo, document.getElementById('demo-automatic'));

    // Demo 2: Main counter
    const count = signal(0);
    const mainDemo = h('div', {}, [
      h('div', { className: 'counter-display' }, [count]),
      h('div', { className: 'button-group' }, [
        h('button', { onclick: () => count.value -= 10 }, ['-10']),
        h('button', { onclick: () => count.value-- }, ['-1']),
        h('button', { onclick: () => count.value = 0, className: 'secondary' }, ['Reset']),
        h('button', { onclick: () => count.value++ }, ['+1']),
        h('button', { onclick: () => count.value += 10 }, ['+10']),
      ])
    ]);
    mountReactive(mainDemo, document.getElementById('demo-main'));

    // Demo 3: Multiple signals with math
    const a = signal(5);
    const b = signal(3);
    const sum = computed(() => a.value + b.value);
    const product = computed(() => a.value * b.value);

    const mathDemo = h('div', {}, [
      h('div', { style: { fontSize: '28px', textAlign: 'center', margin: '20px 0', fontWeight: 'bold' } }, [
        a, ' + ', b, ' = ', sum,
        h('br'),
        a, ' √ó ', b, ' = ', product
      ]),
      h('div', { style: { marginBottom: '10px' } }, [
        h('strong', {}, ['A = ']),
        a,
        ' ',
        h('button', { onclick: () => a.value--, style: { padding: '6px 12px', fontSize: '14px' } }, ['-']),
        ' ',
        h('button', { onclick: () => a.value++, style: { padding: '6px 12px', fontSize: '14px' } }, ['+'])
      ]),
      h('div', {}, [
        h('strong', {}, ['B = ']),
        b,
        ' ',
        h('button', { onclick: () => b.value--, style: { padding: '6px 12px', fontSize: '14px' } }, ['-']),
        ' ',
        h('button', { onclick: () => b.value++, style: { padding: '6px 12px', fontSize: '14px' } }, ['+'])
      ])
    ]);
    mountReactive(mathDemo, document.getElementById('demo-math'));

    // Demo 4: Computed status
    const isActive = signal(true);
    const statusText = computed(() => isActive.value ? 'System Active ‚úì' : 'System Inactive ‚úó');
    const statusColor = computed(() => isActive.value ? '#28a745' : '#dc3545');

    const computedDemo = h('div', {}, [
      h('div', {
        style: computed(() => ({
          fontSize: '32px',
          fontWeight: 'bold',
          textAlign: 'center',
          color: statusColor.value,
          margin: '20px 0',
          padding: '20px',
          background: isActive.value ? '#d4edda' : '#f8d7da',
          borderRadius: '8px'
        }))
      }, [statusText]),
      h('div', { className: 'button-group' }, [
        h('button', { onclick: () => isActive.value = !isActive.value }, ['Toggle Status'])
      ])
    ]);
    mountReactive(computedDemo, document.getElementById('demo-computed'));

    console.log('‚úÖ All demos loaded with AUTOMATIC REACTIVITY!');
    console.log('üí° Tip: Signals passed as children update the DOM automatically');
    console.log('üöÄ No manual effect() calls needed!');
  </script>
</body>
</html>
