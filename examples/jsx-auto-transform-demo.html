<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flexium - Automatic JSX Transform Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .counter-container {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      max-width: 500px;
      width: 100%;
      text-align: center;
    }

    h1 {
      color: #667eea;
      margin-bottom: 10px;
      font-size: 2rem;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 0.9rem;
      font-style: italic;
    }

    .greeting {
      font-size: 1.2rem;
      color: #333;
      margin-bottom: 20px;
      padding: 15px;
      background: #f0f4ff;
      border-radius: 10px;
    }

    .count-display {
      font-size: 4rem;
      font-weight: bold;
      color: #667eea;
      margin: 30px 0;
      padding: 20px;
      background: linear-gradient(135deg, #f0f4ff 0%, #e8edff 100%);
      border-radius: 15px;
    }

    .button-group {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin: 30px 0;
    }

    button {
      font-size: 1.5rem;
      padding: 15px 30px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    button:active {
      transform: translateY(0);
    }

    button:nth-child(1) {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
      color: white;
    }

    button:nth-child(2) {
      background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
      color: white;
    }

    button:nth-child(3) {
      background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%);
      color: white;
    }

    .info {
      margin-top: 30px;
      padding: 20px;
      background: #fff9e6;
      border-radius: 10px;
      border-left: 4px solid #ffd43b;
    }

    .info > div {
      margin: 5px 0;
      font-size: 0.9rem;
      color: #666;
    }

    .badge {
      display: inline-block;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.8rem;
      margin-top: 10px;
      font-weight: bold;
    }

    .code-highlight {
      background: #2d3748;
      color: #68d391;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      font-size: 0.85rem;
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script type="module">
    // Import from the built dist files
    import { signal, effect } from '../dist/index.mjs'
    import { render } from '../dist/dom.mjs'
    // NOTE: We're using the built JS here, but the source .tsx file
    // uses automatic JSX runtime without importing h!

    // Create reactive signals
    const count = signal(0)
    const name = signal('Developer')

    // Manually create VNodes (simulating what automatic JSX transform does)
    function Counter() {
      return {
        type: 'div',
        props: { class: 'counter-container' },
        children: [
          {
            type: 'h1',
            props: {},
            children: ['Automatic JSX Runtime Demo']
          },
          {
            type: 'div',
            props: { class: 'subtitle' },
            children: ['No h import needed!']
          },
          {
            type: 'div',
            props: { class: 'greeting' },
            children: [`Hello, ${name.value}!`]
          },
          {
            type: 'div',
            props: { class: 'count-display', id: 'count-display' },
            children: [String(count.value)]
          },
          {
            type: 'div',
            props: { class: 'button-group' },
            children: [
              {
                type: 'button',
                props: {
                  onclick: () => {
                    count.value--
                    console.log('[-] Decremented to:', count.value)
                  },
                  title: 'Decrement'
                },
                children: ['-']
              },
              {
                type: 'button',
                props: {
                  onclick: () => {
                    count.value = 0
                    console.log('[Reset] Count reset to:', count.value)
                  }
                },
                children: ['Reset']
              },
              {
                type: 'button',
                props: {
                  onclick: () => {
                    count.value++
                    console.log('[+] Incremented to:', count.value)
                  },
                  title: 'Increment'
                },
                children: ['+']
              }
            ]
          },
          {
            type: 'div',
            props: { class: 'info' },
            children: [
              {
                type: 'div',
                props: {},
                children: ['With automatic JSX transform, just write:']
              },
              {
                type: 'div',
                props: {},
                children: [
                  {
                    type: 'span',
                    props: { class: 'code-highlight' },
                    children: ['import { render } from "flexium/dom"']
                  }
                ]
              },
              {
                type: 'div',
                props: { class: 'badge' },
                children: ['Powered by Flexium.js JSX Runtime']
              }
            ]
          }
        ]
      }
    }

    // Render the app
    const appContainer = document.getElementById('app')
    if (appContainer) {
      render(Counter(), appContainer)

      // Setup reactive updates with effect
      effect(() => {
        const countDisplay = document.getElementById('count-display')
        if (countDisplay) {
          countDisplay.textContent = String(count.value)
        }
      })

      console.log('‚úÖ Automatic JSX Runtime Demo loaded!')
      console.log('Initial count:', count.value)
      console.log('')
      console.log('üìù In the source .tsx file, you would write:')
      console.log('   import { render } from "flexium/dom"')
      console.log('   // No h import needed!')
      console.log('   function Counter() {')
      console.log('     return <div>...</div>')
      console.log('   }')
      console.log('')
      console.log('üîß TypeScript automatically imports from flexium/jsx-runtime')
    }
  </script>
</body>
</html>
