<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flexium Vanilla Starter</title>
  <style>
    /* ========================================
       RESET & BASE STYLES
       ======================================== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --color-primary: #667eea;
      --color-primary-dark: #5a67d8;
      --color-success: #10b981;
      --color-danger: #ef4444;
      --color-gray-50: #f9fafb;
      --color-gray-100: #f3f4f6;
      --color-gray-600: #4b5563;
      --color-gray-900: #111827;
      --spacing-sm: 8px;
      --spacing-md: 16px;
      --spacing-lg: 24px;
      --spacing-xl: 32px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, var(--color-primary) 0%, #764ba2 100%);
      min-height: 100vh;
      padding: var(--spacing-lg);
      color: var(--color-gray-900);
    }

    /* ========================================
       LAYOUT
       ======================================== */
    #app {
      max-width: 800px;
      margin: 0 auto;
    }

    .card {
      background: white;
      border-radius: var(--radius-lg);
      padding: var(--spacing-xl);
      box-shadow: var(--shadow-lg);
      margin-bottom: var(--spacing-lg);
    }

    .header {
      text-align: center;
      margin-bottom: var(--spacing-md);
    }

    .header h1 {
      font-size: 2.5rem;
      color: var(--color-primary);
      margin-bottom: var(--spacing-sm);
    }

    .header p {
      color: var(--color-gray-600);
      font-size: 1.1rem;
    }

    /* ========================================
       COUNTER
       ======================================== */
    .counter {
      text-align: center;
    }

    .counter h2 {
      color: var(--color-gray-900);
      margin-bottom: var(--spacing-lg);
    }

    .count-display {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-xl);
    }

    .count-display .label {
      font-size: 1.2rem;
      color: var(--color-gray-600);
    }

    .count-display .value {
      font-size: 3rem;
      font-weight: bold;
      color: var(--color-primary);
      min-width: 80px;
    }

    .controls {
      display: flex;
      gap: var(--spacing-md);
      justify-content: center;
    }

    /* ========================================
       BUTTONS
       ======================================== */
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: var(--radius-md);
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: inherit;
      min-width: 80px;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-success {
      background: var(--color-success);
      color: white;
    }

    .btn-danger {
      background: var(--color-danger);
      color: white;
    }

    .btn-secondary {
      background: #6b7280;
      color: white;
    }

    /* ========================================
       INFO
       ======================================== */
    .info h3 {
      color: var(--color-gray-900);
      margin-bottom: var(--spacing-md);
    }

    .info ul {
      list-style-position: inside;
      color: var(--color-gray-600);
      line-height: 1.8;
    }

    .info li {
      margin-bottom: var(--spacing-sm);
    }

    .info code {
      background: var(--color-gray-100);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 0.9em;
      color: var(--color-primary-dark);
    }

    /* ========================================
       FOOTER
       ======================================== */
    .footer {
      text-align: center;
      color: white;
      padding: var(--spacing-lg);
      font-size: 0.9rem;
      opacity: 0.9;
    }

    /* ========================================
       RESPONSIVE
       ======================================== */
    @media (max-width: 768px) {
      body {
        padding: var(--spacing-md);
      }

      .header h1 {
        font-size: 2rem;
      }

      .count-display .value {
        font-size: 2.5rem;
      }

      .controls {
        flex-direction: column;
      }

      .btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script type="module">
    // ========================================
    // FLEXIUM SIGNAL IMPLEMENTATION
    // ========================================

    /**
     * In production, you would import Flexium from npm:
     * import { signal, computed, effect } from 'flexium'
     *
     * For this vanilla starter, we're using a simplified inline implementation
     * that demonstrates the core concepts.
     */

    let activeEffect = null

    /**
     * Create a reactive signal
     * @param {*} initialValue - The initial value of the signal
     * @returns {Object} Signal object with value getter/setter
     */
    function signal(initialValue) {
      let value = initialValue
      const subscribers = new Set()

      return {
        get value() {
          // Track this signal as a dependency if we're inside an effect
          if (activeEffect) {
            subscribers.add(activeEffect)
          }
          return value
        },
        set value(newValue) {
          if (value !== newValue) {
            value = newValue
            // Notify all subscribers when value changes
            subscribers.forEach(fn => fn())
          }
        }
      }
    }

    /**
     * Create a computed value that automatically updates
     * @param {Function} fn - Function to compute the value
     * @returns {Object} Computed signal
     */
    function computed(fn) {
      const result = signal(undefined)
      effect(() => {
        result.value = fn()
      })
      return result
    }

    /**
     * Run a side effect that automatically tracks dependencies
     * @param {Function} fn - Effect function to run
     */
    function effect(fn) {
      const execute = () => {
        activeEffect = execute
        try {
          fn()
        } finally {
          activeEffect = null
        }
      }
      execute()
    }

    // ========================================
    // APPLICATION STATE
    // ========================================

    // Create reactive signals
    const count = signal(0)

    // Create computed values
    const doubled = computed(() => count.value * 2)
    const isPositive = computed(() => count.value > 0)
    const isNegative = computed(() => count.value < 0)

    // ========================================
    // ACTIONS
    // ========================================

    function increment() {
      count.value++
    }

    function decrement() {
      count.value--
    }

    function reset() {
      count.value = 0
    }

    // ========================================
    // RENDERING
    // ========================================

    function render() {
      const app = document.getElementById('app')
      app.innerHTML = `
        <div class="card">
          <div class="header">
            <h1>Flexium Vanilla Starter</h1>
            <p>No build tools required - just open and code!</p>
          </div>
        </div>

        <div class="card">
          <div class="counter">
            <h2>Counter Example</h2>
            <div class="count-display">
              <span class="label">Count:</span>
              <span class="value">${count.value}</span>
            </div>
            <div class="controls">
              <button class="btn btn-danger" id="decrement-btn">-</button>
              <button class="btn btn-secondary" id="reset-btn">Reset</button>
              <button class="btn btn-success" id="increment-btn">+</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="info">
            <h3>Computed Values</h3>
            <ul>
              <li>Doubled: <strong>${doubled.value}</strong></li>
              <li>Is Positive: <strong>${isPositive.value ? 'Yes' : 'No'}</strong></li>
              <li>Is Negative: <strong>${isNegative.value ? 'Yes' : 'No'}</strong></li>
            </ul>
          </div>
        </div>

        <div class="card">
          <div class="info">
            <h3>Next Steps:</h3>
            <ul>
              <li>Open this file in your editor and explore the code</li>
              <li>Modify the counter logic or add new features</li>
              <li>Add your own components and signals</li>
              <li>Install Flexium via npm for production apps</li>
              <li>Check out the Vite starter for advanced features</li>
            </ul>
          </div>
        </div>

        <div class="footer">
          Built with Flexium - Fine-grained reactivity for modern UIs
        </div>
      `

      // Attach event listeners
      document.getElementById('increment-btn').addEventListener('click', increment)
      document.getElementById('decrement-btn').addEventListener('click', decrement)
      document.getElementById('reset-btn').addEventListener('click', reset)
    }

    // ========================================
    // EFFECTS
    // ========================================

    // Re-render when count changes
    effect(() => {
      // Access reactive values to create dependencies
      count.value
      doubled.value
      isPositive.value
      isNegative.value

      // Re-render the entire app
      render()
    })

    // Log changes to console
    effect(() => {
      console.log('Count changed:', count.value)
      console.log('Doubled:', doubled.value)
    })

    // ========================================
    // INITIALIZATION
    // ========================================

    console.log('‚úÖ Flexium Vanilla Starter loaded!')
    console.log('üìù Open the browser console to see reactive updates')
    console.log('üéØ Try clicking the buttons and watch the magic happen!')
  </script>
</body>
</html>
